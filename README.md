# RabbitMQ 学习笔记
用于系统性的学习RabbitM

### 总结

- 不直接Exchange交换机（默认交换机）
  1. simple简单模式：一个生产者生产一个消息到一个队列被一个消费者接收
  2. work工作队列模式：生产者发送消息到一个队列中，然后可以被多个消费者监听该队列；一个消息只能被一个消费者接收，消费者之间是竞争关系
- 使用Exchange交换机；订阅模式（交换机：广播fanout、定向direct、通配符topic）
  1. 发布与订阅模式：使用了fanout广播类型的交换机，可以将一个消息发送到所有绑定了该交换机的队列
  2. 路由模式：使用了direct定向类型的交换机，消费会携带路由key，交换机根据消息的路由key与队列的路由key进行对比，一致的话那么该队列可以接收到消息
  3. 通配符模式：使用了topic通配符类型的交换机，消费会携带路由key（*， #），交换机根据消息的路由key与队列的路由key进行对比，匹配的话那么该队列可以接收到消息

***

### 个人感悟

本质上只是分成了两类：

* 队列模式
  1. Producer的Channel中声明队列并进行basicPublish即可，交换机使用默认的
  2. 其中监听队列的Consumer可以有n个，n>=1
  3. Consumer中声明队列，并进行basicConsume
  4. 当有多个Consumer时，通过basicQos指定每次预取的消息数量
  5. Consumer消费完成一个消息，通过basicAck进行一次确认，让队列知道这条已经消费

* 交换机模式
  1. 通过交换机进行分配，将数据压到对应的交换机并指定对应路由
  2. Consumer需要声明交换机，队列，并将二者进行绑定
  3. routingKey可以使用""表示所有的消息都接收，或者使用固定字符串表示只接收这个routingkey，或者使用`*`和`#`进行通配
  
***
